docker image ls
docker container ls
docker container ls -a
docker volume ls
docker network ls



echo "Hello World" 
docker run  busybox echo "Hello World"
docker run -it ubuntu:latest each "Hello World"
docker run -it ubuntu:latest cat /etc/lsb-release
docker run -it ubuntu:latest bash
	cat /etc/lsb-release
	echo "Hello World"
	exit

docker run -it centos:latest each "Hello World"
docker run -it centos:latest cat /etc/centos-release
docker run -ti centos:latest bash
	cat /etc/centos-release
	echo "Hello World"
	exit

docker run -it busybox sh
	busybox
	busybox | head -n 10
 	busybox | grep ping

docker run -it ubuntu:latest ping 8.8.8.8
docker run -it centos:latest ping 8.8.8.8
docker run -it busybox ping 8.8.8.8

docker run -it ubuntu:latest bash
	apt update
	apt install iputils-ping
	ping 8.8.8.8
	exit

docker run -it ubuntu:latest ping 8.8.8.8  //???

PS C:\Users\mkbah> docker container ls -a
CONTAINER ID   IMAGE             COMMAND                  CREATED             STATUS                         PORTS                     NAMES
c61fd94c8b29   ubuntu:latest     "ping 8.8.8.8"           18 seconds ago      Created                                                  modest_swirles
e9e99be2481c   ubuntu:latest     "bash"                   9 minutes ago       Exited (137) 2 minutes ago                               eager_mcnulty
e77a1c2e883e   busybox:latest    "ping 8.8.8.8"           10 minutes ago      Exited (0) 10 minutes ago                                friendly_nightingale

docker run -it e9e99be2481c bash	//???

+docker exec -it e9e99be2481c bash bash 	//???
+docker start e9e99be2481c
docker exec e9e99be2481c ping 8.8.8.8

docker commit e9e99be2481c mkbahk/ubuntuwithping
docker save mkbahk/ubuntuwithping:latest -o ubuntuwithping.docker.image

PS C:\Users\mkbah> docker container ls -a
CONTAINER ID   IMAGE                          COMMAND                  CREATED             STATUS                      PORTS                     NAMES
633a6c56dbc5   mkbahk/ubuntuwithping:latest   "ping 8.8.8.8"           21 seconds ago      Exited (0) 16 seconds ago                             inspiring_volhard



docker system prune -a

docker load -i .\ubuntuwithping.docker.image
docker run -it mkbahk/ubuntuwithping:latest ping 8.8.8.8
docker rm 633a6c56dbc5
docker container ls

docker image ls

PS C:\Users\mkbah> docker image ls
REPOSITORY              TAG         IMAGE ID       CREATED          SIZE
mkbahk/ubuntuwithping   latest    4766280c184f   12 minutes ago   113MB
postgres                latest    5b21e2e86aab   6 days ago       376MB

docker rmi mkbahk/ubuntuwithping:latest


docker tag mkbahk/ubuntuwithping:latest docker.io/mkbahk/ubuntuwithping:1.9
docker login   //dockerhub.com 에 로그인해야 함. ]
docker push mkbahk/ubuntuwithping:latest
//dockerhub.com 의 자신의 ID에서 리스트 확인
docker pull mkbahk/ubuntuwithping:latest
docker run -it mkbahk/ubuntuwithping:latest ping 8.8.8.8
Ctrl-c

docker run mkbahk/ubuntuwithping:latest ping 8.8.8.8
Ctrl-c  // stop이 불가

docker run hello-world
docker image lsPS C:\Users\mkbah> docker container ls
CONTAINER ID   IMAGE                          COMMAND                  CREATED          STATUS          PORTS                     NAMES
2a6dd1553358   mkbahk/ubuntuwithping:latest   "ping 8.8.8.8"           49 seconds ago   Up 48 seconds                             friendly_antonelli
5d30aff0cc02   postgres:latest                "docker-entrypoint.s…"   2 hours ago      Up 2 hours      0.0.0.0:49153->5432/tcp   postgres-Hr9o
PS C:\Users\mkbah> docker stop 2a6dd1553358
2a6dd1553358

//이미지가 없으면 로컬시스템repository에서 찻고, 없으면 Local Repository, 없으면 Public Repository(dockerhub.com)에서 찾아서, 다운로드하고, 실행시키는 명령
docker run -it mkbahk/ubuntuwithping:latest ping 8.8.8.8



//postgresql 설치

docker run -d -p 54320:5432 -e POSTGRES_PASSWORD=posgrespw --name postgres postgres:latest 
psql -h localhost -U postgres -w

외부에서 DBeaver를 통해서 접속합니다.
Connection String: postgres://postgres:postgrespw@localhost:49153

CREATE TABLE public.HelloTable (
	id 		int PRIMARY KEY NOT NULL,
	name	text NOT NULL,
	age		int NOT NULL,
	address char(50),
	salary	REAL
);

select * from public.HelloTable;

insert into public.HelloTable (id, name, age ) values 
	(3, 'Bahk, Sang-Bong', 80),
	(2, 'Bahk, Kee-Berm', 20),
	(1, 'Bahk, Moon-Kee', 50);

select * from public.HelloTable;

drop table public.HelloTable;

//zeppelin
docker run -d -p 8787:8080 --link postgres:postgres --name zeppelin zeppelin:0.10.1
 




//mysql 설치 및 서비스 수행, 암호없이 접속 + wordpress 설치 및 mysql와 연결
docker run -p 3306(바깥쪽):3306(안쪽) --name mysql -d mysql:
docker container ps

PS C:\Users\mkbah> docker container ls
CONTAINER ID   IMAGE             COMMAND                  CREATED          STATUS          PORTS                               NAMES
c9eff902ddbb   mysql:latest      "docker-entrypoint.s…"   21 minutes ago   Up 21 minutes   0.0.0.0:3306->3306/tcp, 33060/tcp   mysql
5d30aff0cc02   postgres:latest   "docker-entrypoint.s…"   5 hours ago      Up 5 hours      0.0.0.0:49153->5432/tcp             postgres-Hr9o
PS C:\Users\mkbah>

docker logs c9eff902ddbb

docker run -d -p 3306:3306 -e MYSQL_ALLOW_EMPTY_PASSWORD=true --name mysql mysql:latest
docker exec -it mysql bash
	mysql -u root -p
	Enter  //password가 없습니다.
	show databases;
	use mysql;
	show tables;
	select * from user;
	exit
	exit

//wordpress를 위한 mysql 설치
docker run -d --name mysql -v mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=wordpress -e MYSQL_DATABASE=wordpress -e MYSQL_USER=wordpress -e MYSQL_PASSWORD=wordpress mysql:5.7


//wordpress 설치 및 mysql 연결
docker run -d --name wordpress --link mysql:mysql -v wordpress:/var/www/html -e WORDPRESS_DB_HOST=mysql:3306 -e WORDPRESS_DB_USER=wordpress -e WORDPRESS_DB_PASSWORD=wordpress -p 8989:80 wordpress:latest




	
//파일 Upload, Download
//host -> Container
docker cp .\dvdrental.zip postgres-Hr9o:/dvdrental.zip
docker cp .\dvdrental.zip postgres-Hr9o:/tmp/dvdrental.zip

docker exec -it postgres-Hr9o bash
	cd /tmp
	ls -al

//container -> host 
docker cp postgres-Hr9o:/tmp/dvdrental.zip   .\dvdrental-co.zip 
dir



//Docker에 Volume Mount
docker volume create HelloVolume
docker volume ls HelloVolume:/mnt/HelloVolume


root@srv161:~# sudo ls -al /var/lib/docker/volumes
total 76
drwx------ 11 root root  4096  6월  4 18:46 .
drwx--x--x 14 root root  4096  6월  4 15:03 ..
drwxr-xr-x  3 root root  4096  6월  4 17:16 49006234c749e913038abd2944d5c0f86e7afd10f7307090146ca66a4fca7068
drwxr-xr-x  3 root root  4096  6월  4 17:16 6043736fd514fe72222593c1b13bde271af77d82ed924c47eef9b4d1e29ce6e6
drwxr-xr-x  3 root root  4096  6월  4 18:19 8bc53954fc3d784aa7c6af200ca71791c80cf961c3c8907cc5bdf2114a1d3a00
drwxr-xr-x  3 root root  4096  6월  4 18:21 a4e13aa9d83c119e8538632a1cd80d248f8ef570c2a0de04cf6486f841c2a190
drwxr-xr-x  3 root root  4096  6월  4 18:18 aedf123be47bbc0e3fc02615535d0993790e311ff1720929268b5f968ac5ced9
drwxr-xr-x  3 root root  4096  6월  4 18:46 HelloVolume
-rw-------  1 root root 65536  6월  4 18:46 metadata.db
drwxr-xr-x  3 root root  4096  6월  4 14:42 mysql
drwxrwxrwx  3 root root  4096  6월  4 18:39 pgdata
drwxr-xr-x  3 root root  4096  6월  4 14:44 wordpress

docker run -it -v HelloVolume:/mnt/HelloVolume --name ubuntu00 ubuntu:18.04 bash
	cd /mnt/HelloVolume
	echo "Created by ubuntu00" >> ubuntu00.txt
	ls -al
	
docker run -it -v HelloVolume:/mnt/HelloVolume --name ubuntu01 ubuntu:18.04 bash
	cd /mnt/HelloVolume
	echo "Created by ubuntu01" >> ubuntu01.txt
	ls -al


//NFS Volume attach

docker volume create --driver local --opt type=nfs --opt o=addr=218.145.56.74,rw --opt device=:/localdata/nfs_kube nfsvol

docker run -it -v nvfvol:/mnt/nfsvol --name ubuntu00 ubuntu:18.04 bash
	cd /mnt/nfsvol
	echo "Created by ubuntu00" >> ubuntu00-nfs.txt
	ls -al
	
docker run -it -v nfsvol:/mnt/nvfvol --name ubuntu01 ubuntu:18.04 bash
	cd /mnt/nfsvol
	echo "Created by ubuntu01" >> ubuntu01-nfs.txt
	ls -al





docker compsor
docker swam








